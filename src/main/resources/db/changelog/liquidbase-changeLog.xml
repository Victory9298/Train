<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                   https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">

    <changeSet id="train-table-creation" author="Victoria">
      <sql>
        CREATE TABLE IF NOT EXISTS train (
            id INT PRIMARY KEY AUTO_INCREMENT,
            number VARCHAR(500),
            places_number INT
        )
      </sql>
    </changeSet>
    <changeSet id="station-table-creation" author="Victoria">
        <sql>
            CREATE TABLE IF NOT EXISTS station (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(500)
                )
        </sql>
    </changeSet>
    <changeSet id="passenger-table-creation" author="Victoria">
        <sql>
            CREATE TABLE IF NOT EXISTS passenger (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100),
                surname VARCHAR(100),
                birth_date TIMESTAMP(0)
                )
        </sql>
    </changeSet>
    <changeSet id="schedule-creation" author="Victoria">
        <sql>
            CREATE TABLE IF NOT EXISTS schedule (
            id SERIAL PRIMARY KEY,
            station_id INTEGER NOT NULL,
            train_id INTEGER NOT NULL,
            time TIME,
            FOREIGN KEY (station_id) REFERENCES station(id),
            FOREIGN KEY (train_id) REFERENCES train(id)
            )
        </sql>
    </changeSet>
    <changeSet id="scheduledb-creation" author="Victoria">
        <sql>
            CREATE TABLE IF NOT EXISTS scheduledb (
            id SERIAL PRIMARY KEY,
            train_name VARCHAR(500),
            station_name VARCHAR(500),
            time TIME
                )
        </sql>
    </changeSet>
    <changeSet id="table-ticket-creation" author="Victoria">
        <sql>
            CREATE TABLE IF NOT EXISTS ticket (
            id SERIAL PRIMARY KEY,
            train_id INTEGER NOT NULL,
            passenger_id INTEGER NOT NULL,
            start_station_id INTEGER NOT NULL,
            end_station_id INTEGER NOT NULL,
            FOREIGN KEY (train_id) REFERENCES train(id),
            FOREIGN KEY (passenger_id) REFERENCES passenger(id),
            FOREIGN KEY (start_station_id) REFERENCES station(id),
            FOREIGN KEY (end_station_id) REFERENCES station(id)
            )
        </sql>
    </changeSet>
</databaseChangeLog>